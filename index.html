<!DOCTYPE html>
<html>
  <head>
    <title>ISS Path - Engaging with the International Space Station</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="css/app.min.css">
    <style>
      /* TODO */
    </style>
  </head>

  <body>
    <div class="app-page" data-page="home">
      <div class="app-topbar">
        <div class="app-title">ISS Path</div>
      </div>
      <div class="app-content">
        <div class="app-section">
          <div class="app-button" data-target="page2">Another Page If Needed</div>
          <div>
          	<table>
				<tr>
					<th></th>
					<th>Position(km)</th>
					<th>Velocity(m/s)</th>
				</tr>
				<tr>
					<td>X</td>
					<td id="USLAB000032"></td>
					<td id="USLAB000035"></td>
				</tr>
				<tr>
					<td>Y</td>
					<td id="USLAB000033"></td>
					<td id="USLAB000036"></td>
				</tr>
				<tr>
					<td>Z</td>
					<td id="USLAB000034"></td>
					<td id="USLAB000037"></td>
				</tr>
			</table>
          </div>
        </div>
      </div>
    </div>

    <div class="app-page" data-page="page2">
      <div class="app-topbar">
        <div class="app-button left" data-back data-autotitle></div>
        <div class="app-title">Page 2</div>
      </div>
      <div class="app-content">
        Page 2 is lonely
      </div>
    </div>

    <script src="cordova.js"></script>
    <script src="js/require.js"></script>
	<script src="js/lightstreamer.js"></script>
	<script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/app.min.js"></script>

    <script>
      App.controller('home', function (page) {
      	require(["LightstreamerClient","Subscription"],function(LightstreamerClient,Subscription) {
			var client = new LightstreamerClient("https://push.lightstreamer.com","ISSLIVE");
			client.connect();
			
			var sub = new Subscription("MERGE",["USLAB000032","USLAB000035","USLAB000033","USLAB000036","USLAB000034","USLAB000037"],["Value"]);
			client.subscribe(sub);
			
			sub.addListener({
				onItemUpdate: function(update) {
					$("#"+update.getItemName()).text(update.getValue("Value"));
				}
			});
			
		});
      });

      App.controller('page2', function (page) {
        // put stuff here
      });

      try {
        App.restore();
      } catch (err) {
        App.load('home');
      }
    </script>
  </body>
</html>
